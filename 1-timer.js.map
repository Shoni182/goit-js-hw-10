{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\n// Завдання\n// #region Task\n// - Стилізація\n\n// - Пошук елементів: кнопка старт, інпут\n\n// В 1 завданні обов’язково кнопка Старт має бути неактивною одразу при завантаженні сторінки, коли йде відлік часу і при обиранні невалідної дати. Інпут треба робити неактивним, коли йде відлік часу, коли таймер доходить до 00 - знов робимо інпут активним, щоб можна було обрати нову дату.\n\n// - Вибір Дати\n// записати вибрану дату після валідації її в методі\n// library options\n// якщо користувач вибрав в минулому то ініціювати бібліотеку повідомлення та заблокувати кнопку старт\n// якщо в майбутньому то зробити кнопку старт валідною доти не валідна\n// заблокувати кнопку старт поки інтервал не завершиться\n\n// - Відлік часу\n\n//після натисканя відлік раз 1 секунду кнопка старт та інпут стають не активними\n// оновлення інтерфейс таймера textContent\n// таймер зупиняєтья коли дійшов до кінцевої дати тобто 00 00 00 00\n\n//  щоб має зробити таймер щоб рахувати\n//  він повинен знати першу вибрану дату в млс в майбутньому\n//  він повинен знати теперішню дату в мілісекундаї\n// цб різницю перетворити в години дні за допомогою конвертації convertMs(ms)\n\n// - Форматування часу\n// функція convertMs( ) повертає обʼєкт з рохрахованим часом що залишився докінцевох лати\n// Напиши функцію, наприклад addLeadingZero(value), яка використовує метод рядка padStart() і перед відмальовуванням інтерфейсу форматує значення.\n// Використовувати датасет\n\n// - Бібліотека повідомлень\n// Повідомлення\n\n// #endregion\n\n//:  ======== Пошук ДОМ елементів ========\n\nconst refs = {\n  startBtn: document.querySelector('button[data-start]'),\n  input: document.querySelector('#datetime-picker[data-active]'),\n  clockFace: document.querySelector('.value'),\n\n  days: document.querySelector('.value[data-days]'),\n  hours: document.querySelector('.value[data-hours]'),\n  minutes: document.querySelector('.value[data-minutes]'),\n  seconds: document.querySelector('.value[data-seconds]'),\n};\n\n//: - ======== button settings ========\n\nrefs.startBtn.dataset.start = 'disable';\n\n//: - ======== data pick ========\n// записати сюди дату\nlet currentTime;\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    currentTime = new Date();\n    if (selectedDates[0] > currentTime) {\n      refs.startBtn.dataset.start = 'enable';\n      userSelectedDate = selectedDates[0];\n    } else {\n      console.log('Option - false ');\n      refs.startBtn.dataset.start = 'disable';\n\n      iziToast.show({\n        title: 'Hey',\n        messageSize: '20',\n        message: `Please choose a date in the future! for exapmle ${new Date(\n          Date.now() + 76000000\n        ).toLocaleString('uk-UA')}`,\n        position: 'center',\n        close: true,\n        closeOnEscape: true,\n        theme: 'light',\n        color: 'red',\n      });\n    }\n  },\n};\n\n// lib init\nflatpickr('#datetime-picker', options);\n\n//: - ======== timer ========\n\nconst timer = {\n  isActive: false,\n  intervalId: null,\n\n  start() {\n    if (this.isActive) return;\n    this.isActive = true;\n    refs.input.dataset.active = 'disable';\n    refs.startBtn.dataset.start = 'disable';\n\n    this.intervalId = setInterval(() => {\n      currentTime = new Date();\n      const diffMS = userSelectedDate - currentTime;\n      const result = convertMs(diffMS);\n      console.log(result);\n\n      refs.days.textContent = result.days;\n      refs.hours.textContent = result.hours;\n      refs.minutes.textContent = result.minutes;\n      refs.seconds.textContent = result.seconds;\n\n      if (diffMS <= 0) {\n        this.stop();\n      }\n    }, 1000);\n  },\n\n  stop() {\n    if (!this.isActive) return;\n    this.isActive = false;\n    // console.log('STOP TIMER');\n    clearInterval(this.intervalId);\n    refs.clockFace.textContent = '00:00:00:00';\n    refs.input.dataset.active = 'disable';\n  },\n};\n\n//: - ======== init ========\n\nrefs.startBtn.addEventListener('click', () => timer.start());\n\n//: - ======== Функція преведеннчя мс ========\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const pad = num => String(num).padStart(2, '0');\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["refs","currentTime","userSelectedDate","options","selectedDates","iziToast","flatpickr","timer","diffMS","result","convertMs","ms","pad","num","days","hours","minutes","seconds"],"mappings":"yFAyCA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,oBAAoB,EACrD,MAAO,SAAS,cAAc,+BAA+B,EAC7D,UAAW,SAAS,cAAc,QAAQ,EAE1C,KAAM,SAAS,cAAc,mBAAmB,EAChD,MAAO,SAAS,cAAc,oBAAoB,EAClD,QAAS,SAAS,cAAc,sBAAsB,EACtD,QAAS,SAAS,cAAc,sBAAsB,CACxD,EAIAA,EAAK,SAAS,QAAQ,MAAQ,UAI9B,IAAIC,EACAC,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAc,IAAI,KACdG,EAAc,CAAC,EAAIH,GACrBD,EAAK,SAAS,QAAQ,MAAQ,SAC9BE,EAAmBE,EAAc,CAAC,IAElC,QAAQ,IAAI,iBAAiB,EAC7BJ,EAAK,SAAS,QAAQ,MAAQ,UAE9BK,EAAS,KAAK,CACZ,MAAO,MACP,YAAa,KACb,QAAS,mDAAmD,IAAI,KAC9D,KAAK,IAAG,EAAK,IACvB,EAAU,eAAe,OAAO,CAAC,GACzB,SAAU,SACV,MAAO,GACP,cAAe,GACf,MAAO,QACP,MAAO,KACf,CAAO,EAEJ,CACH,EAGAC,EAAU,mBAAoBH,CAAO,EAIrC,MAAMI,EAAQ,CACZ,SAAU,GACV,WAAY,KAEZ,OAAQ,CACF,KAAK,WACT,KAAK,SAAW,GAChBP,EAAK,MAAM,QAAQ,OAAS,UAC5BA,EAAK,SAAS,QAAQ,MAAQ,UAE9B,KAAK,WAAa,YAAY,IAAM,CAClCC,EAAc,IAAI,KAClB,MAAMO,EAASN,EAAmBD,EAC5BQ,EAASC,EAAUF,CAAM,EAC/B,QAAQ,IAAIC,CAAM,EAElBT,EAAK,KAAK,YAAcS,EAAO,KAC/BT,EAAK,MAAM,YAAcS,EAAO,MAChCT,EAAK,QAAQ,YAAcS,EAAO,QAClCT,EAAK,QAAQ,YAAcS,EAAO,QAE9BD,GAAU,GACZ,KAAK,KAAI,CAEZ,EAAE,GAAI,EACR,EAED,MAAO,CACA,KAAK,WACV,KAAK,SAAW,GAEhB,cAAc,KAAK,UAAU,EAC7BR,EAAK,UAAU,YAAc,cAC7BA,EAAK,MAAM,QAAQ,OAAS,UAC7B,CACH,EAIAA,EAAK,SAAS,iBAAiB,QAAS,IAAMO,EAAM,MAAK,CAAE,EAI3D,SAASG,EAAUC,EAAI,CAOrB,MAAMC,EAAMC,GAAO,OAAOA,CAAG,EAAE,SAAS,EAAG,GAAG,EAGxCC,EAAOF,EAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EAE/BI,EAAQH,EAAI,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAEzCK,EAAUJ,EAAI,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDM,EAAUL,EAAI,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}